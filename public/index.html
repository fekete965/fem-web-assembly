<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Assembly</title>
</head>
<div id="main"></div>
  <script src="https://cdn.jsdelivr.net/npm/@assemblyscript/loader/umd/index.js"></script>
  <script src=/js/loader.js></script>
  <script type="text/javascript">
      const WL = new WasmLoader();
      WL.wasm('/wasm/release.wasm')
        .then(instance => {
          /*
          //Fizzbuzz example code
          const { fizzbuzz, __getString } = instance;
          // Convert the pointer returned 
          const str = __getString(fizzbuzz(3));
          
          document.write(str);
          */

          // Reading and Writing to memory to/from JS/WASM
          const { readMemory, memory } = instance;
          
          const memoryArray = new Uint8Array(memory.buffer);

          document.write(memoryArray[1])
          document.write("<br />")

          memoryArray[2] = 42
          
          document.write(readMemory(2))
        });
  </script>
</html>
